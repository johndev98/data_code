{
    "dictionary_path": "content/dictionary/languages/dart.json",
    "blocks": [
        {
            "type": "heading",
            "value": "Async/Await (B·∫•t ƒë·ªìng b·ªô) - C∆° b·∫£n"
        },
        {
            "type": "text",
            "value": "Async/await cho ph√©p b·∫°n vi·∫øt code b·∫•t ƒë·ªìng b·ªô m·ªôt c√°ch d·ªÖ ƒë·ªçc, nh∆∞ th·ªÉ code ƒë·ªìng b·ªô. ƒêi·ªÅu n√†y r·∫•t quan tr·ªçng khi l√†m vi·ªác v·ªõi network requests, file I/O, ho·∫∑c b·∫•t k·ª≥ t√°c v·ª• n√†o m·∫•t th·ªùi gian."
        },
        {
            "type": "key_concepts",
            "concepts": [
                {
                    "title": "Future",
                    "description": "Future ƒë·∫°i di·ªán cho m·ªôt gi√° tr·ªã s·∫Ω c√≥ trong t∆∞∆°ng lai. Gi·ªëng nh∆∞ l·ªùi h·ª©a s·∫Ω tr·∫£ v·ªÅ k·∫øt qu·∫£ sau."
                },
                {
                    "title": "async function",
                    "description": "H√†m async tr·∫£ v·ªÅ Future. B√™n trong c√≥ th·ªÉ d√πng await ƒë·ªÉ ch·ªù k·∫øt qu·∫£."
                },
                {
                    "title": "await",
                    "description": "await t·∫°m d·ª´ng th·ª±c thi h√†m cho ƒë·∫øn khi Future ho√†n th√†nh, nh∆∞ng kh√¥ng block thread ch√≠nh."
                },
                {
                    "title": "then() v√† catchError()",
                    "description": "C√°ch c≈© ƒë·ªÉ x·ª≠ l√Ω Future: future.then((value) {}).catchError((error) {})."
                },
                {
                    "title": "try-catch v·ªõi async",
                    "description": "D√πng try-catch ƒë·ªÉ x·ª≠ l√Ω l·ªói trong async function, gi·ªëng nh∆∞ code ƒë·ªìng b·ªô."
                }
            ]
        },
        {
            "type": "code",
            "value": "import 'dart:async';\n\n// H√†m async tr·∫£ v·ªÅ Future\nFuture<String> fetchData() async {\n  // Gi·∫£ l·∫≠p delay 2 gi√¢y\n  await Future.delayed(Duration(seconds: 2));\n  return 'D·ªØ li·ªáu ƒë√£ t·∫£i xong!';\n}\n\nvoid main() async {\n  print('B·∫Øt ƒë·∫ßu...');\n  \n  // D√πng await ƒë·ªÉ ch·ªù k·∫øt qu·∫£\n  String data = await fetchData();\n  print(data);\n  \n  print('Ho√†n th√†nh!');\n}",
            "language": "dart",
            "keywords": [
                "Future",
                "async",
                "await",
                "Duration"
            ]
        },
        {
            "type": "step_by_step",
            "title": "Vi·∫øt code async",
            "steps": [
                "Th√™m async v√†o h√†m ƒë·ªÉ l√†m n√≥ async",
                "Thay ƒë·ªïi return type th√†nh Future<Type>",
                "D√πng await tr∆∞·ªõc c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô",
                "D√πng try-catch ƒë·ªÉ x·ª≠ l√Ω l·ªói",
                "G·ªçi h√†m async v·ªõi await trong h√†m async kh√°c"
            ]
        },
        {
            "type": "code",
            "value": "import 'dart:async';\n\nFuture<int> calculateSum(int a, int b) async {\n  // Gi·∫£ l·∫≠p t√≠nh to√°n m·∫•t th·ªùi gian\n  await Future.delayed(Duration(seconds: 1));\n  return a + b;\n}\n\nFuture<void> main() async {\n  try {\n    print('ƒêang t√≠nh...');\n    int result = await calculateSum(5, 3);\n    print('K·∫øt qu·∫£: $result');\n  } catch (e) {\n    print('L·ªói: $e');\n  }\n  \n  // Ch·∫°y nhi·ªÅu Future song song\n  Future<int> future1 = calculateSum(1, 2);\n  Future<int> future2 = calculateSum(3, 4);\n  \n  List<int> results = await Future.wait([future1, future2]);\n  print('K·∫øt qu·∫£: $results'); // [3, 7]\n}",
            "language": "dart",
            "keywords": [
                "try",
                "catch",
                "Future.wait"
            ]
        },
        {
            "type": "analogy",
            "concept": "Async nh∆∞ ƒë·∫∑t h√†ng online",
            "value": "Async/await gi·ªëng nh∆∞ ƒë·∫∑t h√†ng online: b·∫°n ƒë·∫∑t h√†ng (g·ªçi h√†m async), l√†m vi·ªác kh√°c trong l√∫c ch·ªù (kh√¥ng block), v√† khi h√†ng ƒë·∫øn (Future ho√†n th√†nh), b·∫°n nh·∫≠n h√†ng (await tr·∫£ v·ªÅ k·∫øt qu·∫£)."
        },
        {
            "type": "comparison",
            "wrong": "String data = fetchData(); // L·ªói! fetchData() tr·∫£ v·ªÅ Future",
            "right": "String data = await fetchData(); // ƒê√∫ng! await ƒë·ªÉ ch·ªù Future",
            "reason": "H√†m async tr·∫£ v·ªÅ Future, kh√¥ng ph·∫£i gi√° tr·ªã tr·ª±c ti·∫øp. Ph·∫£i d√πng await ƒë·ªÉ l·∫•y gi√° tr·ªã t·ª´ Future."
        },
        {
            "type": "practice",
            "title": "B√†i t·∫≠p: T·∫£i d·ªØ li·ªáu gi·∫£ l·∫≠p",
            "description": "Vi·∫øt h√†m loadUserData() gi·∫£ l·∫≠p t·∫£i d·ªØ li·ªáu user. H√†m delay 1.5 gi√¢y r·ªìi tr·∫£ v·ªÅ Map v·ªõi 'name' v√† 'age'. X·ª≠ l√Ω l·ªói n·∫øu c√≥.",
            "code_template": "import 'dart:async';\n\nvoid main() async {\n  // TODO: G·ªçi h√†m v√† in k·∫øt qu·∫£\n}\n\n// TODO: Vi·∫øt h√†m loadUserData()",
            "solution": "import 'dart:async';\n\nvoid main() async {\n  try {\n    Map<String, dynamic> user = await loadUserData();\n    print('T√™n: ${user['name']}, Tu·ªïi: ${user['age']}');\n  } catch (e) {\n    print('L·ªói: $e');\n  }\n}\n\nFuture<Map<String, dynamic>> loadUserData() async {\n  await Future.delayed(Duration(seconds: 1, milliseconds: 500));\n  return {'name': 'Nguy·ªÖn VƒÉn A', 'age': 25};\n}",
            "hint": "D√πng Future.delayed() ƒë·ªÉ gi·∫£ l·∫≠p delay, tr·∫£ v·ªÅ Map<String, dynamic>."
        },
        {
            "type": "callout",
            "style": "tip",
            "value": "üí° M·∫πo: D√πng Future.wait() ƒë·ªÉ ch·∫°y nhi·ªÅu Future song song thay v√¨ ch·ªù t·ª´ng c√°i m·ªôt. ƒêi·ªÅu n√†y gi√∫p code nhanh h∆°n nhi·ªÅu!"
        },
        {
            "type": "checkpoint",
            "question": "Khi n√†o c·∫ßn d√πng async/await?",
            "options": [
                "Khi l√†m vi·ªác v·ªõi t√°c v·ª• b·∫•t ƒë·ªìng b·ªô (network, file I/O)",
                "Khi c·∫ßn t√≠nh to√°n nhanh",
                "Khi l√†m vi·ªác v·ªõi bi·∫øn s·ªë",
                "Khi kh√¥ng c·∫ßn ch·ªù k·∫øt qu·∫£"
            ],
            "correct_answer": 0,
            "explanation": "Async/await d√πng cho c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô nh∆∞ t·∫£i d·ªØ li·ªáu t·ª´ m·∫°ng, ƒë·ªçc/ghi file, ho·∫∑c b·∫•t k·ª≥ t√°c v·ª• n√†o m·∫•t th·ªùi gian v√† kh√¥ng n√™n block UI thread."
        },
        {
            "type": "summary",
            "value": "B·∫°n ƒë√£ h·ªçc v·ªÅ async/await trong Dart - c√°ch vi·∫øt code b·∫•t ƒë·ªìng b·ªô d·ªÖ ƒë·ªçc, x·ª≠ l√Ω Future, v√† d√πng try-catch cho l·ªói. Async/await l√† c√¥ng c·ª• m·∫°nh m·∫Ω cho c√°c t√°c v·ª• kh√¥ng ƒë·ªìng b·ªô.",
            "key_points": [
                "Future ƒë·∫°i di·ªán cho gi√° tr·ªã t∆∞∆°ng lai",
                "async function tr·∫£ v·ªÅ Future",
                "await ƒë·ªÉ ch·ªù Future ho√†n th√†nh",
                "D√πng try-catch ƒë·ªÉ x·ª≠ l√Ω l·ªói",
                "Future.wait() ƒë·ªÉ ch·∫°y song song"
            ]
        }
    ]
}